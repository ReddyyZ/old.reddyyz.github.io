{"pageProps":{"frontmatter":{"title":"Quebrando Chaves Privadas SSH/RSA","date":"Mar 24 2024","excerpt":"Uma das melhores maneiras de proteger seu servidor SSH, é desabilitar os logins com senha e habilitar o login com chave privada RSA. Mas com uma boa wordlist e as ferramentas certas, essa segurança pode ser quebrada.","category":"criptografia","cover_image":"https://reddyyz.github.io/images/posts/gerando-chave-ssh.png"},"slug":"quebrando-chaves-privadas-ssh-rsa","content":"\nUma das melhores maneiras de proteger seu servidor SSH, é desabilitar os logins com senha e habilitar o login com chave privada RSA. Mas com uma boa wordlist e as ferramentas certas, essa segurança pode ser quebrada.\n\n## O que é a criptografia RSA\n\nA criptografia RSA é um sistema criptográfico baseado no sistema de criptografia assimétrica, considerado um dos mais seguros da atualidade.\n\nEsse sistema funciona com duas chaves criptográficas: pública (responsável apenas pela criptografia, pode ser compartilhada com todos) e privada (chave utilizada para descriptografar o conteúdo, deve ser guardada em segurança).\n\nA chave privada, vem normalmente protegida por uma senha, necessária para realizar o processo de descriptografia. Porém, com a wordlist certa podemos burlar este sistema, como será mostrado posteriormente neste artigo.\n\n## Criando uma chave SSH para teste\n\nPrimeiro, vamos criar uma chave SSH para que possamos tentar quebrá-la.\n\n```sh\n$ ssh-keygen -t rsa\n```\n\n![Gerando chave SSH](https://reddyyz.github.io/images/posts/gerando-chave-ssh.png)\n\nEspecifique onde deseja salvar a chave, e escolha uma senha que esteja em sua wordlist.\n\n![Gerando chave SSH](https://reddyyz.github.io/images/posts/ssh-chaves.png)\n\nPodemos ver que foram geradas a chave privada (id_rsa) e a chave públida (id_rsa.pub).\nAgora já podemos prosseguir com os testes.\n\n\n## Instalando as ferramentas necessárias\nNeste exemplo, usaremos a famosa ferramenta [John The Ripper](https://www.openwall.com/john/). \n\nEla é um password cracker baseado em wordlists, que suporta os mais diversos tipos de hashes.\n\nPara instalá-lo basta executar o seguinte comando:\n```sh\n$ apt-get install john\n```\nOu baixando pelo [site oficial](https://www.openwall.com/john/).\n\n## Transformando a chave em um hash\n\nPara crackear a chave, primeiro precisamos gerar um hash que a nossa ferramenta possa quebrar.\n\n```sh\n$ ssh2john id_rsa > id_rsa.txt\n```\n\n![Gerando chave SSH](https://reddyyz.github.io/images/posts/ssh-hash.png)\n\nAgora já podemos crackear a hash!\n\n## Crackeando a chave RSA\n\nCom tudo pronto, basta rodar o seguinte comando usando a sua wordlist favorita.\n\n```sh\n$ john id_rsa.txt --wordlist=rockyou.txt\n```\n\nNo caso, estou usando a famosa wordlist [rockyou.txt](https://github.com/praetorian-inc/Hob0Rules/blob/master/wordlists/rockyou.txt.gz).\n\n![Gerando chave SSH](https://reddyyz.github.io/images/posts/ssh-hash-quebrada.png)\n\nEspere até que a ferramenta encontre a senha correta.\n\nA senha foi encontrada com sucesso! ```football         (id_rsa) ```\n\nTenha em mente que isso pode levar algum tempo, desde alguns segundos, até várias horas. Tudo vai depender do poder de processamento de seu computador e de sua wordlist. Mas se a senha estiver em sua wordlist, ela será encontrada!\n\n","categories":{"hacking":4,"criptografia":2,"web":0}},"__N_SSG":true}